<div class="dashboard-container">
    <div class="page-header">
        <div class="header-content">
            <h1>ğŸ¯ Dashboard Manager</h1>
            <p>Vue d'ensemble complÃ¨te de votre Ã©quipe et des activitÃ©s</p>
        </div>
    </div>

    @if (errorMessage()) {
    <div class="alert alert-error">
        <span>âš ï¸ {{ errorMessage() }}</span>
        <button (click)="errorMessage.set(null)">âœ•</button>
    </div>
    }

    @if (loading()) {
    <div class="loading-state">
        <div class="spinner"></div>
        <p>Chargement des statistiques...</p>
    </div>
    } @else if (stats()) {

    <!-- KPI Cards Grid -->
    <div class="stats-grid">
        <!-- Carte: Ã‰quipe -->
        <div class="stat-card team-card">
            <div class="card-header">
                <div class="stat-icon">ğŸ‘¥</div>
                <div class="stat-badge">Ã‰quipe</div>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stats()!.nombreEmployes }}</div>
                <div class="stat-label">Membres actifs</div>
            </div>
            <div class="card-footer">
                <button class="quick-link" [routerLink]="['/manager/team']">
                    Voir l'Ã©quipe â†’
                </button>
            </div>
        </div>

        <!-- Carte: Niveau moyen -->
        <div class="stat-card level-card">
            <div class="card-header">
                <div class="stat-icon">ğŸ“Š</div>
                <div class="stat-badge">Performance</div>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stats()!.niveauMoyenEquipe | number:'1.0-1' }}<span class="unit">%</span>
                </div>
                <div class="stat-label">Niveau moyen</div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="stats()!.niveauMoyenEquipe"></div>
            </div>
        </div>

        <!-- Carte: Ã‰valuations en attente -->
        <div class="stat-card eval-card clickable" [routerLink]="['/manager/evaluations']">
            <div class="card-header">
                <div class="stat-icon">â­</div>
                <div class="stat-badge pending">En attente</div>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stats()!.evaluationsEnAttente }}</div>
                <div class="stat-label">Ã‰valuations</div>
            </div>
            <div class="card-footer">
                <span class="action-hint">Cliquez pour Ã©valuer â†’</span>
            </div>
        </div>

        <!-- Carte: Tests en cours -->
        <div class="stat-card tests-card">
            <div class="card-header">
                <div class="stat-icon">ğŸ“</div>
                <div class="stat-badge">Tests</div>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stats()!.testsEnCours }}</div>
                <div class="stat-label">Tests actifs</div>
            </div>
        </div>

        <!-- Carte: Projets actifs -->
        <div class="stat-card projects-card">
            <div class="card-header">
                <div class="stat-icon">ğŸš€</div>
                <div class="stat-badge">Projets</div>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ stats()!.projetsActifs }}</div>
                <div class="stat-label">Projets en cours</div>
            </div>
        </div>
    </div>

    <!-- CompÃ©tences Section -->
    <div class="competences-section">
        <div class="section-header">
            <h2>ğŸ“ˆ Analyse des CompÃ©tences</h2>
            <p>Forces et axes d'amÃ©lioration de votre Ã©quipe</p>
        </div>

        <div class="competences-grid">
            <!-- CompÃ©tences fortes -->
            <div class="competences-card strong-skills">
                <div class="card-icon">ğŸ’ª</div>
                <h3>CompÃ©tences fortes</h3>
                @if (stats()!.competencesFortes.length > 0) {
                <div class="competences-list">
                    @for (comp of stats()!.competencesFortes; track comp) {
                    <span class="skill-badge success">{{ comp }}</span>
                    }
                </div>
                } @else {
                <p class="empty-message">Aucune compÃ©tence forte identifiÃ©e pour le moment</p>
                }
            </div>

            <!-- CompÃ©tences Ã  renforcer -->
            <div class="competences-card weak-skills">
                <div class="card-icon">âš ï¸</div>
                <h3>Ã€ renforcer</h3>
                @if (stats()!.competencesFaibles.length > 0) {
                <div class="competences-list">
                    @for (comp of stats()!.competencesFaibles; track comp) {
                    <span class="skill-badge warning">{{ comp }}</span>
                    }
                </div>
                } @else {
                <p class="empty-message">Aucune faiblesse identifiÃ©e - Excellent travail!</p>
                }
            </div>
        </div>
    </div>

    <!-- Actions rapides -->
    <div class="quick-actions-section">
        <div class="section-header">
            <h2>âš¡ Actions Rapides</h2>
            <p>AccÃ¨s direct aux fonctionnalitÃ©s principales</p>
        </div>

        <div class="actions-grid">
            <button class="action-card" [routerLink]="['/manager/team']">
                <div class="action-icon">ğŸ‘¥</div>
                <div class="action-content">
                    <h4>Mon Ã‰quipe</h4>
                    <p>GÃ©rer les membres</p>
                </div>
                <div class="action-arrow">â†’</div>
            </button>

            <button class="action-card highlight" [routerLink]="['/manager/evaluations']">
                <div class="action-icon">â­</div>
                <div class="action-content">
                    <h4>Ã‰valuer</h4>
                    <p>Valider les compÃ©tences</p>
                </div>
                @if (stats()!.evaluationsEnAttente > 0) {
                <div class="action-badge">{{ stats()!.evaluationsEnAttente }}</div>
                }
                <div class="action-arrow">â†’</div>
            </button>

            <button class="action-card" [routerLink]="['/manager/tests']">
                <div class="action-icon">ğŸ“</div>
                <div class="action-content">
                    <h4>Tests</h4>
                    <p>Assigner et suivre</p>
                </div>
                <div class="action-arrow">â†’</div>
            </button>

            <button class="action-card" [routerLink]="['/manager/projects']">
                <div class="action-icon">ğŸš€</div>
                <div class="action-content">
                    <h4>Projets</h4>
                    <p>GÃ©rer les affectations</p>
                </div>
                <div class="action-arrow">â†’</div>
            </button>
        </div>
    </div>
    }
</div>