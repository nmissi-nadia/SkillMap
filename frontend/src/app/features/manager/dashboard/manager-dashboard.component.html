<div class="dashboard-container">
    <div class="page-header">
        <div class="header-content">
            <h1>Tableau de Bord Manager</h1>
            <p>Vue d'ensemble de votre Ã©quipe et des activitÃ©s</p>
        </div>
    </div>

    @if (errorMessage()) {
    <div class="alert alert-error">
        <span>âš ï¸ {{ errorMessage() }}</span>
        <button (click)="errorMessage.set(null)">âœ•</button>
    </div>
    }

    @if (loading()) {
    <div class="loading-state">
        <div class="spinner"></div>
        <p>Chargement des statistiques...</p>
    </div>
    } @else if (stats()) {
    <div class="stats-grid">
        <!-- Carte: Ã‰quipe -->
        <div class="stat-card">
            <div class="stat-icon">ğŸ‘¥</div>
            <div class="stat-content">
                <div class="stat-label">Membres de l'Ã©quipe</div>
                <div class="stat-value">{{ stats()!.nombreEmployes }}</div>
            </div>
        </div>

        <!-- Carte: Niveau moyen -->
        <div class="stat-card">
            <div class="stat-icon">ğŸ“Š</div>
            <div class="stat-content">
                <div class="stat-label">Niveau moyen</div>
                <div class="stat-value">{{ stats()!.niveauMoyenEquipe | number:'1.0-1' }}%</div>
            </div>
        </div>

        <!-- Carte: Ã‰valuations en attente -->
        <div class="stat-card clickable" [routerLink]="['/manager/evaluations']">
            <div class="stat-icon">â­</div>
            <div class="stat-content">
                <div class="stat-label">Ã‰valuations en attente</div>
                <div class="stat-value">{{ stats()!.evaluationsEnAttente }}</div>
            </div>
            <div class="stat-action">â†’</div>
        </div>

        <!-- Carte: Tests en cours -->
        <div class="stat-card">
            <div class="stat-icon">ğŸ“</div>
            <div class="stat-content">
                <div class="stat-label">Tests en cours</div>
                <div class="stat-value">{{ stats()!.testsEnCours }}</div>
            </div>
        </div>

        <!-- Carte: Projets actifs -->
        <div class="stat-card">
            <div class="stat-icon">ğŸš€</div>
            <div class="stat-content">
                <div class="stat-label">Projets actifs</div>
                <div class="stat-value">{{ stats()!.projetsActifs }}</div>
            </div>
        </div>
    </div>

    <!-- CompÃ©tences fortes et faibles -->
    <div class="competences-section">
        <div class="competences-card">
            <h3>ğŸ’ª CompÃ©tences fortes de l'Ã©quipe</h3>
            @if (stats()!.competencesFortes.length > 0) {
            <div class="competences-list">
                @for (comp of stats()!.competencesFortes; track comp) {
                <span class="badge badge-success">{{ comp }}</span>
                }
            </div>
            } @else {
            <p class="empty-message">Aucune compÃ©tence forte identifiÃ©e</p>
            }
        </div>

        <div class="competences-card">
            <h3>âš ï¸ CompÃ©tences Ã  renforcer</h3>
            @if (stats()!.competencesFaibles.length > 0) {
            <div class="competences-list">
                @for (comp of stats()!.competencesFaibles; track comp) {
                <span class="badge badge-warning">{{ comp }}</span>
                }
            </div>
            } @else {
            <p class="empty-message">Aucune faiblesse identifiÃ©e</p>
            }
        </div>
    </div>

    <!-- Actions rapides -->
    <div class="quick-actions">
        <h3>Actions rapides</h3>
        <div class="actions-grid">
            <button class="action-btn" [routerLink]="['/manager/team']">
                <span class="action-icon">ğŸ‘¥</span>
                <span class="action-label">Voir mon Ã©quipe</span>
            </button>
            <button class="action-btn" [routerLink]="['/manager/evaluations']">
                <span class="action-icon">â­</span>
                <span class="action-label">Ã‰valuer compÃ©tences</span>
            </button>
            <button class="action-btn">
                <span class="action-icon">ğŸ“</span>
                <span class="action-label">Assigner un test</span>
            </button>
            <button class="action-btn">
                <span class="action-icon">ğŸš€</span>
                <span class="action-label">GÃ©rer les projets</span>
            </button>
        </div>
    </div>
    }
</div>